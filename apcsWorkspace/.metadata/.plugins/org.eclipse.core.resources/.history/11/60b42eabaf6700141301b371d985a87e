/*
Cody Brooks
2014-11-06
*/

public class AmericanSoundex {

	public static String getSoundex( String name ) {
		String soundex = "";

		name = name.toLowerCase();
		char[] nameCharList = name.toCharArray();
//		char[] soundexList = new char[name.length()];

		/*Adds soundex values for all letters*/
		for (int i = 0; i < nameCharList.length; i++){
			/*Tried changing this to adding elements to an array*/
			soundex += getSoundexVal(nameCharList[i]);
		}

		/*Remove duplicate numbers*/
		String newsoundex = "";
		char[] soundexList = soundex.toCharArray();

		for (int i = 0; i < soundex.length(); i++){
			if (i == 0){
				/*Add the first letter to the begining of the soundex string*/
				newsoundex += nameCharList[0];
			} else if (soundexList[i] != soundexList[i-1]) {
				/*Soundex value is unique. Add it to the soundex string*/
				newsoundex += soundexList[i];
			} else {
				/*Soundex value is a duplicate. Do nothing*/
			}
		}

		soundex = newsoundex;
		System.out.println("Un-truncated soundex is " + soundex);

		if (soundex.length() < 4){
			/*Fill in with 0's*/
			for(int fillLen = 4 - soundex.length(); fillLen > 0; fillLen--){
				soundex += "0";
			}
		} else if (soundex.length() > 4){
			/*Truncate to 4 digits*/
			soundex = soundex.substring(0, 4);
		}

		soundex = soundex.toUpperCase();
		return soundex;
	}


	private static String getSoundexVal(char soundexChar){

		String soundexVal = "";

		if (soundexChar == 'a'
				|| soundexChar == 'e'
				|| soundexChar == 'i'
				|| soundexChar == 'o'
				|| soundexChar == 'u'
				|| soundexChar == 'y'
				|| soundexChar == 'h'
				|| soundexChar == 'w'){
			soundexVal = "";
		} else if (soundexChar == 'b'
				|| soundexChar == 'f'
				|| soundexChar == 'p'
				|| soundexChar == 'v'){
			soundexVal = '1';
		} else if (soundexChar == 'c'
				|| soundexChar == 'g'
				|| soundexChar == 'j'
				|| soundexChar == 'k'
				|| soundexChar == 'q'
				|| soundexChar == 's'
				|| soundexChar == 'x'
				|| soundexChar == 'z'){
			soundexVal = '2';
		} else if (soundexChar == 'd' || soundexChar == 't'){
			soundexVal = "3";
		} else if (soundexChar == 'l'){
			soundexVal = "4";
		} else if (soundexChar == 'm' || soundexChar == 'n'){
			soundexVal = "5";
		}else if (soundexChar == 'r'){
			soundexVal = "6";
		}

		return soundexVal;

	}

}
